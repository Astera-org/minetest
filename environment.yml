name: minetest
channels:
  - conda-forge
  - nodefaults
dependencies:
  # minetest build deps
  # NOTE: I was not able to get the build to work
  # using conda-provided compilers. Doing so led
  # to strange behavior with CMake's library resolution where it
  # would refuse to use system-provided OpenGL headers when
  # compiling Irrlicht no matter how hard I tried.
  # And unfortunately there is no OpenGL implementation in conda.
  - capnproto
  - cmake
  - gettext
  - gmp
  - jsoncpp
  - libcurl
  - libsqlite
  - luajit-openresty
  - make
  - ncurses
  # TODO: move mold from
  # Dockerfile / apt-get to here once
  # https://github.com/conda-forge/capnproto-feedstock/pull/32
  # (currently mold requires OpenSSL 3 and capnproto requires 1)
  - ninja
  - pkg-config
  - sdl2
  - zmqpp
  - zstd
  # python deps
  - gymnasium
  - numpy
  - pillow
  - pip
  - pip:
    - -e python
  - pycapnp
  - pygame
  - pytest
  - pytest-repeat # useful for debugging flakiness
  - python=3.11
  - pyzmq
  # others
  - pre-commit
